---
title: Python 기반 정적 사이트 생성기: Lektor
layout: post
category: 삽질
tags: jekyll lector
---

최근에 알게 된 [Lektor](https://www.getlektor.com) 로 이 블로그를 갈아타려 했었다. 결과는, 그리 만족스럽지 못했다.

페이지 주소가 폴더 기반이라는 점, 때문에 '하위 페이지' 개념을 손쉽게 사이트에 적용할 수 있다는 점이 매력적이었고, Jekyll의 생소한  Liquid 기반 템플릿 언어 대신 좀 더 익숙했던 [Jinja](http://jinja.pocoo.org/docs/2.10/)를 사용할 수 있다는 점 때문에 갈아타려 했었다. 자체 기능 중 하나인 `deploy` 그러니까 마치 여느 포털 사이트의 블로그 글을 쓰는 것 처럼 로컬에서 실행되는 관리자 웹UI의 버튼을 통해 깃허브에 푸쉬를 때릴 수 있다는 점도 매력적이었다. 깃허브에서 Jekyll을 지원한다고는 하지만, 글 업데이트 후 페이지가 서버에서 빌드되는 시간이 그동안 사소하게나마 불만이었는데 이런 딜레이가 급격하게 짧아지는 부가적인 장점이 따라왔다.

그러나 본 블로그에 적용하면서 몇 가지 문제점이 있었다.

일단, 구형이다. 이용자 수도 다른 정적 페이지 툴에 비해 매우 적은 편이며, 커뮤니티도 활발하지 않고, Jekyll에서 *그닥 우아하지는 않지만 어쨌든 지원하는 기능들을* 대체할 만한 게 없었다

Lektor 자체적으로 정의한 `Markdown` 클래스에서 `__len__`메서드가 정의되지 않아 Jinja에서 `len`메서드를 때릴 수 없다는 것까지는  따라갔지만, 소스를 까다 보니 Jinja의 컨택스트를 그냥 무시하고 자체적으로 구현한 것으로 생각되는 부분이 있었다. 본인은 여기서 '앗 이건 아무래도 대공사의 느낌이 든다'는 혼잣말을 해버렸다.. 한글 폴더를 빌드할 수 없는 부분은 포크해서 직접 `encode('ascii')` -> `encode()`로 수정하여 해결했지만(요즘 url도 utf-8 지원하니까 말이다. 파이썬3 encode 메서드는 기본 인코딩이 utf-8이다), 블로그질의 본질이 점점 위협받고 있었다.

플러그인, 테마, 그리고 파일의 필드를 정의하는 모델의 정의까지 많은 부분이 쉽게 사용할 수 있도록 모듈화가 되어 있는 장점이 있었지만, 극적으로 *장점으로 어필하던 Jinja 템플릿* 구문 중 `truncate` 메서드를 사용할 수가 없었다. `truncate`의 대안으로 `lektor-excerpt` 플러그인이 있어서 적용하려 했으나, 작동하지 않았다. 몇 가지 플러그인들이 몇년 가량 근본적인 부분에서 업데이트가 이루어지지 않고 있었다. `lektor-webpack-support` 플러그인의 webpack 설정 파일은 구버전용이어서 본인이 직접 최근 버전대에서 돌아가도록 바꾸었지만, 이런 오버헤드가 계속되면서 일단 여유가 날때 하나씩 손볼 생각으로 다시 Jekyll로 돌아왔다.

뭐 물론 본인의 그닥 굉장하지는 않은(...) 파이썬 실력도 한몫했다. 그래서 일단 *코드까기는 여기까지...*

본인만 쓰는 이 블로그의 테마를 lektor 템플릿 소스로 바꾸다 보니 상당히 유사한 부분이 많았다. '언젠가 할것' 리스트에 적어놓아야겠다.
