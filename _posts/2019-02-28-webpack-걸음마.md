---
layout: post
title: 'webpack-걸음마'
author: Rockheung
tags: codestates javascript bootcamp webpack
categories: Study

---

<h3 id="작성중입니다">작성중입니다</h3>
<p>웹팩을 <em>그런게 있구나</em> 정도로만 여기다가 이번에 어떤 방식으로 돌아가는지 직접 공식사이트의 튜토리얼을 따라가 보았다.</p>
<p>일단 다음과 같은 파일구조가 웹팩이 적용되지 않은 순수한 형태의 패턴이다. <code>index.html</code>의 헤드에 lodash 라이브러리를 cdn의 링크에서 받아와 <code>index.js</code>에서 사용하는 형태이다. 갑자기 <code>_.join()</code>가 등장하고 있다.</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token entity" title="<">&amp;lt;</span>html<span class="token entity" title=">">&amp;gt;</span>
  <span class="token entity" title="<">&amp;lt;</span>head<span class="token entity" title=">">&amp;gt;</span>
    <span class="token entity" title="<">&amp;lt;</span>title<span class="token entity" title=">">&amp;gt;</span>Getting Started<span class="token entity" title="<">&amp;lt;</span>/title<span class="token entity" title=">">&amp;gt;</span>
    <span class="token entity" title="<">&amp;lt;</span>script src=<span class="token entity" title="&quot;">&amp;quot;</span>https://unpkg.com/lodash@4.16.6<span class="token entity" title="&quot;">&amp;quot;</span><span class="token entity" title=">">&amp;gt;</span><span class="token entity" title="<">&amp;lt;</span>/script<span class="token entity" title=">">&amp;gt;</span>
  <span class="token entity" title="<">&amp;lt;</span>/head<span class="token entity" title=">">&amp;gt;</span>
  <span class="token entity" title="<">&amp;lt;</span>body<span class="token entity" title=">">&amp;gt;</span>
    <span class="token entity" title="<">&amp;lt;</span>script src=<span class="token entity" title="&quot;">&amp;quot;</span>./src/index.js<span class="token entity" title="&quot;">&amp;quot;</span><span class="token entity" title=">">&amp;gt;</span><span class="token entity" title="<">&amp;lt;</span>/script<span class="token entity" title=">">&amp;gt;</span>
  <span class="token entity" title="<">&amp;lt;</span>/body<span class="token entity" title=">">&amp;gt;</span>
<span class="token entity" title="<">&amp;lt;</span>/html<span class="token entity" title=">">&amp;gt;</span>
</code></pre>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  <span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'webpack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>이제 다음과 같은 명령을 주어 node 패키지를 사용하도록 하고 webpack을 적용해 보자.</p>
<pre class=" language-shell"><code class="prism  language-shell"># package.json을 만들어준다
npm init 
# package.json의 devDependencies 부분에 webpack이 추가된다
npm install --dev-save webpack webpack-cli
# package.json의 dependencies 부분에 lodash가 추가된다
npm install --save lodash
</code></pre>
<p>그리고 index.js 파일에서 방금 설치한 lodash를 임포트한다. 이제 <code>_</code>가 대체 어디서 튀어나왔는지 바로 알 수 있다.</p>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>  

<span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'webpack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span>  element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>이제 <code>npx webpack</code>을 실행하면 dist 폴더에 main.js 파일이 생길 것이다. <code>./dist/main.js</code> 경로가 디폴트임을 알 수 있다. 이 설정을 이제 바꾸자 하면, webpack.config.js 파일을 다음과 같이 작성해 주면 된다.</p>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>이제 <code>npx webpack --config webpack.config.js</code>를 터미널에서 실행해 주면 예상한 대로 <code>./dist/bundle.js</code>에 만들어짐을 알 수 있다. 사실 파일명을 명시하지 않아도 기본 파일명이 <code>webpack.config.js</code>이다.</p>
<p>이 파일을 이제 index.html에서 임포트해 주면 된다. 물론 기존의 라이브러리 로드하는 스크립트는 날려주고 다음과 같도록 한다.</p>
<pre class=" language-html"><code class="prism  language-html"><span class="token doctype">&lt;!doctype  html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Getting Started<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./dist/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>브라우저로 열어보면 기존대로 hello webpack을 잘 띄워줌을 알 수 있다.</p>
<p>위 과정을 'npm run build 등과’같은 좀더 간단한 명려어로 띄워주려면, package.json 의 scripts에 키값으로 사용할 키워드를, 그의 값으로 실행할 명령을 넣어주면 이제 단순히 <code>npm run build</code>만 쳐주면 간단히 bundle.js가 빌드된다.</p>
<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>

