<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>2. 준비 - 파이썬 가상환경 — blog</title>
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdn.mathjax.org">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all">
    <meta name="keywords" >
    <link rel="canonical" >
    <!-- Custom CSS -->

    <link rel="stylesheet" href="../../static/gen/styles.css?h=30966fac">
    <!--
      <link rel="stylesheet" href="../../static/pixyll.css" type="text/css">
    -->
    <script type=text/javascript src="../../static/gen/app.js?h=56f85b4f" charset="utf-8"></script>
    <link rel="stylesheet" href="../../static/pygments.css">
    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300&subset=latin-ext,latin' rel='stylesheet' type='text/css'>

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

    <!-- MathJax -->
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  </head>

  <body class="site">
    <div class="site-wrap">
      <header class="site-header px2 px-responsive">
        <div class="mt2 wrap">
          <div class="measure">
            <a href="" class="site-title"></a>
            <nav class="site-nav">
              <a href="../../">Home</a>
              
               <a href="../../blog/">Blog</a>
              
              <a href="../../projects/">Projects</a>
              
              <a href="../../about/">About</a>
              
            </nav>
            <div class="clearfix"></div>
            
          </div>
        </div>
      </header>
      <div class="post p2 p-responsive wrap" role="main">
        <div class="measure">
          <div class="page">
            
  
  <div class="post-header mb2">
  
    <h1>2. 준비 - 파이썬 가상환경</h1>
  
  <p class="post-meta">
    <!--
    written by
    
      rockheung
    
    -->
    
    <time class="dt-published" datetime="2018-02-13 11:38:16+09:00">Feb 13, 2018, 11:38:16 AM</time>
    
  </p>
  </div>
  <article class="post-content">
    
      <p>이 글에서는 VPS에서 파이썬 가상환경을 만드는 <code>virtualenvwrapper</code> 를 설치하여 Django를 실행시킬 가상환경을 구성하기 위한 준비를 한다. <code>virtualenv</code>를 사용할 때와는 다르게 <code>virtualenvwrapper</code>는 현재의 path에 상관없이 <code>workon $(가상환경 이름)</code>으로 해당 가상환경을 활성화할 수 있다. 마치 폴더를 만드는 것 처럼 쉽게 가상환경을 만들고, 지울 수 있다.</p>
<!--more-->

<p>파이썬을 사용하다가 필연적으로 맞닥뜨리는 명령어가 바로 "<a href="https://ko.wikipedia.org/wiki/Pip_(%ED%8C%A8%ED%82%A4%EC%A7%80_%EA%B4%80%EB%A6%AC%EC%9E%90">pip</a>)"이다. 대개 다음과 같이 쓴다.</p>
<pre><code>pip install $(파이썬 패키지 이름 in PyPI)
</code></pre>
<p><em><a href="https://pypi.python.org/pypi">PyPI</a></em></p>
<p>파이썬 2.7.9 이후 버전과 3.4 이후 버전은 기본적으로 포함하고 있다고 하나, 가급적이면 최신 pip 패키지를 이용하는 편이 좋다. 최신 버전이 아닐 경우, pip을 실행 시에 업그레이드를 권하는 멘트가 뜬다. <a href="https://bootstrap.pypa.io/get-pip.py">여기 get-pip.py</a>를 눌러 가장 최신 버전의 pip을 설치하는 파이썬 스크립트를 다운 받을 수 있다. 본인은 이 방식을 선호하나,  다른 방식을 찾는다면 <a href="https://pip.pypa.io/en/stable/installing/#">여기</a>에서 공식 문서를 참조할 수 있다.</p>
<p>Root 권한으로 다음을 실행시키면 최신 버전의 pip을 설치할 수 있다.</p>
<pre><code># python get-pip.py
</code></pre>
<p>조금 주의할 부분이 있다면, Ubuntu의 기본 설정은 python : python 2 버전이라는 것이다. 그러니까 위와 같은 커맨드를 날리면 이후 pip으로 설치하는 모든 패키지는 오직 파이썬 2에 해당하는 패키지가 설치될 것이다. 그렇다고 다음과 같이 실행시킨다면</p>
<pre><code># python3 get-pip.py
</code></pre>
<p>이후 모든 <code>pip install $(패키지명)</code> 은 python 3을 위한 패키지만을 설치할 것이다. 자신의 현재 pip 이 어느 버전대의 파이썬 패키지를 설치하고 있는지 알고 싶다면,</p>
<pre><code>$ pip -V
pip 9.0.1 from /usr/local/lib/python2.7/dist-packages (python 2.7)
</code></pre>
<p>터미널에서 위와 같은 옵션으로 확인할 수 있다. <code>pip --help</code> 커맨드로 다양한 다른 옵션을 확인할 수 있다.
한가지 팁이 있다면, 파이썬 2용 패키지를 설치하는 pip2 와 같은 커맨드도 있다. 이 커맨드는 파이썬 2 용 패키지를 설치하도록 강제한다.</p>
<p><em>파이썬 2가 파이썬 3의 하위호환이라고 생각하면 절대 안 된다.</em></p>
<p>비슷하나 서로 독립된 다른 언어라고 생각하는 편이 좋을 것이다. pip으로 2버전대의 패키지를 설치했다고 파이썬 3에서 사용할 수 있는 것은 아니다. 실제로 설치되는 위치가 분리되어 있다. 다음 커맨드로 설치된 파이썬 패키지를 확인할 수 있다.</p>
<pre><code>$ pip list
</code></pre>
<p>정리하면, 만약 다음과 같이 차례로 입력했다고 하자.</p>
<pre><code>$ pip -V
pip 9.0.1 from /usr/local/lib/python3.5/dist-packages (python 3.5)
$
$
$ pip list
boto (2.38.0)
chardet (2.3.0)
cryptography (1.2.3)
duplicity (0.7.6)
enum34 (1.1.2)
idna (2.0)
ipaddress (1.0.16)
lockfile (0.12.2)
ndg-httpsclient (0.4.0)
pbr (3.1.1)
pip (9.0.1)
...
stevedore (1.28.0)
urllib3 (1.13.1)
wheel (0.30.0)
</code></pre>
<p>현재 pip 으로 파이썬 3 용 패키지를 설치할 수 있으며, 파이썬 3용 패키지 중 설치된 목록을 확인한 것이다. 이 상황에서 파이썬 2 용으로 설치된 패키지를 확인하고 싶으면 다음과 같이 입력하자.</p>
<pre><code>$ pip2 list
</code></pre>
<p>이 모든 골때리는 상황을 위와 같은 설명 없이 겪게 된다면, 분명히 설치했는데 import가 되지 않는 상황을 맞닥뜨리게 된다. 이 모든 것의 이유는 바로 아까도 언급했듯이, 파이썬 3가 파이썬 2와 호환되지 않기 때문이다.</p>
<p>그리고 이런 상황을 좀 더 깔끔하고 명확하게 다루기 위해 등장한 것이 파이썬 가상환경이다.</p>
<p>몇 가지 방법(<a href="https://virtualenv.pypa.io/en/stable/">virtualenv</a>, <a href="https://github.com/pyenv/pyenv">pyenv</a>, etc)이 있는 것으로 알지만 본인은 <a href="http://virtualenvwrapper.readthedocs.io/en/stable/">virtualenvwrapper</a>를 사용하는 것을 선호한다. virtualenv 의 상위호한 격으로 생각하면 된다.</p>
<pre><code># pip install virtualenvwrapper
</code></pre>
<p>설치를 하고, 홈 폴더의 Shell startup 파일을 수정하는 과정이 필요하다. 일반적으로 <em>.bashrc</em>나 <em>.profile</em>를 수정한다. 파일의 맨 마지막에 다음 내용을 추가한다. 편집기는 편할 대로 사용한다. 터미널에서 파일을 수정할 때는 대개 <code>vi</code>나 <code>nano</code>를 사용한다. 편집을 할 수만 있으면 어느 편집기를 사용하든 상관없다. 기본 가정이 ssh로 VPS에 접속하는 것이라서 터미널에서 수정하는 경우를 예로 들었다.</p>
<pre><code>export WORKON_HOME=$HOME/.virtualenvs
export PROJECT_HOME=$HOME/Devel
source /usr/local/bin/virtualenvwrapper.sh
</code></pre>
<p>만약 편집기를 사용하는 데에 약간의 어려움이 있거나 귀찮다면 다음과 같이 터미널에서 해결하는 방법도 있다. 수정하고자 하는 파일(.bashrc)의 제일 마지막에 위의 내용을 추가하는 명령어이다. <code>echo '</code>까지만 입력하고 엔터를 누르면 쉘 프롬포트가 $ 에서 &gt; 로 바뀌는데, 이때 위의 내용을 복붙하고 <code>' &gt;&gt; ~/.bashrc</code>를 입력하면 된다. 아마도 다음과 같이 보일 것이다.</p>
<pre><code>$ echo '
&gt; export WORKON_HOME=$HOME/.virtualenvs
&gt; export PROJECT_HOME=$HOME/Devel
&gt; source /usr/local/bin/virtualenvwrapper.sh' &gt;&gt; ~/.bashrc
</code></pre>
<p>잘 추가되었는지 확인하려면 다음 명령어를 날려주자</p>
<pre><code>$ cat ~/.bashrc
</code></pre>
<p>출력되는 내용이 방대할 텐데, 그렇다면 마지막 10줄만 확인하는 다음의 명령어도 괜찮다.</p>
<pre><code>$ tail ~/.bashrc
</code></pre>
<p>제대로 잘 입력이 되었다 생각되면, 다음 명령어로 적용시키자</p>
<pre><code>$ . ~/.bashrc
</code></pre>
<p>다음의 명령어와 같은 의미다.</p>
<pre><code>$ source ~/.bashrc
</code></pre>
<p>이 둘의 차이가 궁금하다면 <a href="https://askubuntu.com/questions/25488/what-is-the-difference-between-source-and">여기</a>에서 해답을 얻을 수 있을 것이다.</p>
<p>어쨌든, 위의 과정까지 따라왔다면, 이제 한 줄만 남았다.</p>
<pre><code>$ mkvirtualenv $(가상환경을 지칭할 이름: ex) myenv)
New python executable in /home/rockheung/.virtualenvs/text/bin/python
Installing setuptools, pip, wheel...done.
virtualenvwrapper.user_scripts creating /home/rockheung/.virtualenvs/myenv/bin/predeactivate
virtualenvwrapper.user_scripts creating /home/rockheung/.virtualenvs/myenv/bin/postdeactivate
virtualenvwrapper.user_scripts creating /home/rockheung/.virtualenvs/myenv/bin/preactivate
virtualenvwrapper.user_scripts creating /home/rockheung/.virtualenvs/myenv/bin/postactivate
virtualenvwrapper.user_scripts creating /home/rockheung/.virtualenvs/myenv/bin/get_env_details
(myenv) $
(myenv) $
</code></pre>
<p>위와 같이 방금 이름붙인 myenv가 shell에 보이면 성공이다.</p>
<p>빠져나가고 싶으면 다음을 입력하자</p>
<pre><code>$ deactivate
</code></pre>
<p>만약 이 가상환경을 지우고 싶으면 위의 출력 내용에도 보이듯이 <em>$HOME/.virtualenvs</em>폴더에 있는 해당 이름의 폴더를 지우면 된다.</p>
<pre><code>$ rm -rf ~/.virtualenvs/myenv
</code></pre>
<p>물론 직관적이게도 <code>rmvirtualenv</code>를 사용하는 것을 권장한다.</p>
<pre><code>$ rmvirtualenv myenv
</code></pre>
<p>가상환경에서 특정 파이썬 버전을 지칭하고 싶다면 <code>-p</code> 매개변수를 붙여 다음과 같이 입력하자.</p>
<pre><code>$ mkvirtualenv myenv3 -p python3
</code></pre>
<p>해당 가상환경이 활성화된 상태에서는 python3 버전이 기본 python이 된다.</p>

    
  </article>


          </div>
        </div>
      </div>
    </div>
    <footer class="center">
      <div class="measure">
        <small>
          &copy; Copyright 2016 by Eswar Malla.
          Theme <a href="https://github.com/eswarm/piktor">Piktor</a> by <a href="http://eswarm.in">Eswar Malla</a>, fork of <a href="https://github.com/johnotander/pixyll">Pixyll</a>
        </small>
      </div>
    </footer>
    
    <div class="ga-script">
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-XXXXXXXX-Y', 'auto');
        ga('send', 'pageview');
</script>
</div>
  </body>
</html>

